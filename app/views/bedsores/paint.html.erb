<%= javascript_include_tag "library/atrament.min" %>
<%= javascript_include_tag "library/konva.min" %>
<%= javascript_include_tag "paint" %>
<h1><%= @bedsore.bedsore_part.patient.name %>さんの<%= @bedsore.bedsore_part.part_name %>褥瘡画像を編集</h1>
<%= link_to("褥瘡ページに戻る", "/bedsores/#{@bedsore.id}") %>
<div>
  <div>
    <div class="form-row">
      <div class="form-group col-md-2">
        <button class="btn btn-primary" id="save_canvas">保存</button>
      </div>
      <div class="form-group col-md-2">
        <button class="btn btn-danger" id="clear_canvas">クリア</button>
        <button class="btn btn-danger" id="zibaku">自爆</button>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-2">
        <label for="color_canvas">ペンの色</label>
        <select id="color_canvas" class="custom-select custom-select-lg mb-3">
          <option value="000000">黒</option>
          <option value="0000ff">青</option>
          <option value="008000">緑</option>
          <option value="ff0000">赤</option>
        </select>
      </div>
      <div class="form-group col-md-2">
        <label for="color_canvas">モード</label>
        <select id="mode_canvas" class="custom-select custom-select-lg mb-3">
          <option value="draw">ペン</option>
          <option value="erase">消しゴム</option>
        </select>
      </div>
      <div class="form-group col-md-6">
        <label for="weight_canvas">太さ</label>
        <input type="range" class="custom-range" min="1" max="20" value="5" id="weight_canvas">
      </div>
    </div>
  <div>

  <div id="canvas_area"></div>

  <%# Controllerからjavascriptに変数を渡すために一旦非表示のformを作る %>
  <%= form_for(@bedsore) do |form| %>
    <%= form.hidden_field :handwrite_image_url %>
    <%= form.hidden_field :image_url %>
  <% end %>

</div>